# π“ TLS/SSL HandShake

<br>

<br>

## 1. TLS(Transport Layer Security) & SSL(Secure Socket Layer)

SSLκ³Ό TLSλ” λ¨λ‘ μ›Ή μ„λ²„μ™€ μ‚¬μ©μμ μ›Ή λΈλΌμ°μ € κ°„ ν†µμ‹ μ„ μ•”νΈν™” ν•λ”λ° μ‚¬μ©λλ” ν”„λ΅ν† μ½

κ³µκ° ν‚¤μ™€ κ°μΈ ν‚¤λ¥Ό κµν™ν•μ—¬ λ³΄μ• μ„Έμ…μ„ μƒμ„±ν•μ—¬ ν†µμ‹ μ„ μ•”νΈν™”ν•λ” λ°©μ‹μ„ μ‚¬μ©

TLSλ” MAC ν•¨μ μƒμ„±μ„ μ„ν•΄ λ‹¤λ¥Έ μ•”νΈν™” μ•κ³ λ¦¬μ¦μ„ μ‚¬μ©ν•λ©°, μ΄λ” μ΄μ „ λ²„μ „μ SSLλ³΄λ‹¤ λ§μ€ κ²½κ³  μ½”λ“λ¥Ό ν¬ν•¨

<br>

SSL(Secure Sockets Layer)μ€ λ³΄μ• μ†μΌ“ κ³„μΈµ μ΄λΌλ” λ»μΌλ΅ μΈν„°λ„·μ„ ν†µν•΄ μ „λ‹¬λλ” μ •λ³΄ λ³΄μ•μ μ•μ „ν• κ±°λλ¥Ό ν—μ©ν•κΈ° μ„ν•΄ Netscape μ‚¬μ—μ„ κ°λ°ν• μΈν„°λ„· ν†µμ‹  κ·μ•½ ν”„λ΅ν† μ½μ΄λ©°, TLS(Transport Layer Security)λ” SSL 3.0μ„ κΈ°μ΄λ΅ ν•΄μ„ IETFκ°€ λ§λ“  ν”„λ΅ν† μ½λ΅ μ΄λ” SSL3.0μ„ λ³΄λ‹¤ μ•μ „ν•κ² ν•κ³  ν”„λ΅ν† μ½μ μ¤ν™μ„ λ” μ •ν™•ν•κ³  μ•μ •μ„±μ„ λ†’μ΄λ” λ©μ μΌλ΅ κ³ μ•λ¨

SSLκ³Ό TLS λ‘ κ°€μ§€ ν”„λ΅ν† μ½μ€ TCP/IP λ„¤νΈμ›ν¬λ¥Ό μ‚¬μ©ν•λ” ν†µμ‹ μ— μ μ©λλ©°, ν†µμ‹  κ³Όμ • μ—μ„ μ „μ†΅κ³„μΈµ μΆ…λ‹¨κ°„ λ³΄μ•κ³Ό λ°μ΄ν„° λ¬΄κ²°μ„±μ„ ν™•λ³΄ ν•  μ μκ² ν•¨

<br>

## 2. TLS/SSL Handshaking

<br>

![image](https://user-images.githubusercontent.com/34904741/139517776-f2cac636-5ce5-4815-981d-33905283bf13.png)

<br>

1. ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„μ—κ² `client hello` λ©”μ‹μ§€λ¥Ό λ‹΄μ•„ μ„λ²„λ΅ λ³΄λƒ„
   μ΄λ• μ•”νΈν™”λ μ •λ³΄λ¥Ό ν•¨κ» λ‹΄λ”λ°, `λ²„μ „`, `μ•”νΈ μ•κ³ λ¦¬μ¦`, `μ••μ¶• λ°©μ‹` λ“±μ„ λ‹΄μ

   <br>

2. μ„λ²„λ” ν΄λΌμ΄μ–ΈνΈκ°€ λ³΄λ‚Έ μ•”νΈ μ•κ³ λ¦¬μ¦κ³Ό μ••μ¶• λ°©μ‹μ„ λ°›κ³ , `μ„Έμ… ID`μ™€ `CA κ³µκ° μΈμ¦μ„`λ¥Ό `server hello` λ©”μ‹μ§€μ™€ ν•¨κ» λ‹΄μ•„ μ‘λ‹µν•λ‹¤. μ΄ CA μΈμ¦μ„μ—λ” μ•μΌλ΅ ν†µμ‹  μ΄ν›„ μ‚¬μ©ν•  λ€μΉ­ν‚¤κ°€ μƒμ„±λκΈ° μ „, ν΄λΌμ΄μ–ΈνΈμ—μ„ handshake κ³Όμ • μ† μ•”νΈν™”μ— μ‚¬μ©ν•  κ³µκ°ν‚¤λ¥Ό λ‹΄μ

   <br>

3. ν΄λΌμ΄μ–ΈνΈ μΈ΅μ€ μ„λ²„μ—μ„ λ³΄λ‚Έ CA μΈμ¦μ„μ— λ€ν•΄ μ ν¨ν• μ§€ CA λ©λ΅μ—μ„ ν™•μΈν•λ” κ³Όμ •μ„ μ§„ν–‰

   <br>

4. CA μΈμ¦μ„μ— λ€ν• μ‹ λΆ°μ„±μ΄ ν™•λ³΄λμ—λ‹¤λ©΄, ν΄λΌμ΄μ–ΈνΈλ” λ‚μ λ°”μ΄νΈλ¥Ό μƒμ„±ν•μ—¬ μ„λ²„μ κ³µκ°ν‚¤λ΅ μ•”νΈν™”ν•λ‹¤. μ΄ λ‚μ λ°”μ΄νΈλ” λ€μΉ­ν‚¤λ¥Ό μ •ν•λ”λ° μ‚¬μ©μ΄ λκ³ , μ•μΌλ΅ μ„λ΅ λ©”μ‹μ§€λ¥Ό ν†µμ‹ ν•  λ• μ•”νΈν™”ν•λ”λ° μ‚¬μ©λ¨

   <br>

5. λ§μ•½ 2λ² λ‹¨κ³„μ—μ„ μ„λ²„κ°€ ν΄λΌμ΄μ–ΈνΈ μΈμ¦μ„λ¥Ό ν•¨κ» μ”κµ¬ν–λ‹¤λ©΄, ν΄λΌμ΄μ–ΈνΈμ μΈμ¦μ„μ™€ ν΄λΌμ΄μ–ΈνΈμ κ°μΈν‚¤λ΅ μ•”νΈν™”λ μ„μμ λ°”μ΄νΈ λ¬Έμμ—΄μ„ ν•¨κ» λ³΄λƒ„

   <br>

6. μ„λ²„λ” ν΄λΌμ΄μ–ΈνΈμ μΈμ¦μ„λ¥Ό ν™•μΈ ν›„, λ‚μ λ°”μ΄νΈλ¥Ό μμ‹ μ κ°μΈν‚¤λ΅ λ³µνΈν™” ν›„ λ€μΉ­ λ§μ¤ν„° ν‚¤ μƒμ„±μ— ν™μ©

   <br>

7. ν΄λΌμ΄μ–ΈνΈλ” handshake κ³Όμ •μ΄ μ™„λ£λμ—λ‹¤λ” `finished` λ©”μ‹μ§€λ¥Ό μ„λ²„μ— λ³΄λ‚΄λ©΄μ„, μ§€κΈκΉμ§€ λ³΄λ‚Έ κµν™ λ‚΄μ—­λ“¤μ„ ν•΄μ‹± ν›„ κ·Έ κ°’μ„ λ€μΉ­ν‚¤λ΅ μ•”νΈν™”ν•μ—¬ κ°™μ΄ λ‹΄μ•„ λ³΄λƒ„

   <br>

8. μ„λ²„λ„ λ™μΌν•κ² κµν™ λ‚΄μ©λ“¤μ„ ν•΄μ‹±ν• λ’¤ ν΄λΌμ΄μ–ΈνΈμ—μ„ λ³΄λ‚΄μ¤€ κ°’κ³Ό μΌμΉν•λ” μ§€ ν™•μΈ. μΌμΉν•λ©΄ μ„λ²„λ„ λ§μ°¬κ°€μ§€λ΅ `finished` λ©”μ‹μ§€λ¥Ό μ΄λ²μ— λ§λ“  λ€μΉ­ν‚¤λ΅ μ•”νΈν™”ν•μ—¬ λ³΄λƒ„

   <br>

9. ν΄λΌμ΄μ–ΈνΈλ” ν•΄λ‹Ή λ©”μ‹μ§€λ¥Ό λ€μΉ­ν‚¤λ΅ λ³µνΈν™”ν•μ—¬ μ„λ΅ ν†µμ‹ μ΄ κ°€λ¥ν• μ‹ λΆ°λ°›μ€ μ‚¬μ©μλ€ κ±Έ μΈμ§€ν•κ³ , μ•μΌλ΅ ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„λ” ν•΄λ‹Ή λ€μΉ­ν‚¤λ΅ λ°μ΄ν„°λ¥Ό μ£Όκ³ λ°›μ„ μ μκ² λ¨

<br>

<br>
